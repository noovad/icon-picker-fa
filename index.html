<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>SVG Icon Picker</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 h-screen overflow-hidden">

<div class="flex h-full">

  <!-- LEFT: Icon List -->
  <div class="w-2/3 border-r bg-white flex flex-col">

    <!-- Header -->
    <div class="p-4 border-b">
      <h1 class="text-xl font-semibold">Icon Picker</h1>

      <input
        type="text"
        id="searchInput"
        placeholder="Search icon..."
        class="mt-3 w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring"
      />
    </div>

    <!-- Tabs -->
    <div id="tabs" class="flex gap-2 px-4 pt-3"></div>

    <!-- Grid -->
    <div id="grid"
         class="p-4 grid grid-cols-6 gap-3 overflow-y-auto flex-1">
    </div>

  </div>


  <!-- RIGHT: Detail Panel -->
  <div class="w-1/3 bg-gray-50 flex flex-col">

    <div class="p-4 border-b">
      <h2 class="text-lg font-semibold">Icon Detail</h2>
    </div>

    <div id="emptyState" class="flex-1 flex items-center justify-center text-gray-400">
      Select an icon
    </div>

    <div id="detailPanel" class="hidden flex-1 flex flex-col p-4 overflow-y-auto">

      <!-- Controls -->
      <div class="flex gap-4 mb-4">
        <div>
          <label class="text-xs text-gray-500">Color</label>
          <input type="color" id="colorPicker" value="#000000" class="block mt-1">
        </div>

        <div>
          <label class="text-xs text-gray-500">Size</label>
          <input type="number" id="sizePicker" value="48" min="8" max="256"
                 class="block mt-1 w-20 px-2 py-1 border rounded">
        </div>
      </div>

      <!-- Preview -->
      <div class="flex justify-center items-center border rounded-md p-6 bg-white mb-4">
        <div id="svgPreview"></div>
      </div>

      <!-- Code -->
      <label class="text-xs text-gray-500 mb-1">SVG Code</label>
      <textarea id="svgCode"
                class="w-full h-40 text-xs p-2 border rounded resize-none"
                readonly></textarea>

      <button id="copyBtn"
              class="mt-3 bg-black text-white py-2 rounded hover:bg-gray-800 text-sm">
        Copy SVG
      </button>

      <div id="copyMsg" class="text-green-600 text-xs mt-2 hidden">
        Copied to clipboard
      </div>

    </div>
  </div>

</div>

<script>
let ICON_DATA = {};
let CURRENT_CATEGORY = null;
let CURRENT_ICON = null;

fetch("icons.json")
  .then(res => res.json())
  .then(data => {
    ICON_DATA = data;
    renderTabs();
  });

/* ------------------ Tabs ------------------ */

function renderTabs() {
  const tabs = document.getElementById("tabs");
  tabs.innerHTML = "";

  Object.keys(ICON_DATA).forEach((category, index) => {
    const btn = document.createElement("button");
    btn.textContent = category;
    btn.className =
      "px-3 py-1 text-sm border rounded hover:bg-gray-100";

    if (index === 0) {
      btn.classList.add("bg-black", "text-white");
      CURRENT_CATEGORY = category;
      renderGrid(category);
    }

    btn.onclick = () => {
      CURRENT_CATEGORY = category;
      renderGrid(category);
      document.querySelectorAll("#tabs button")
        .forEach(b => b.classList.remove("bg-black","text-white"));
      btn.classList.add("bg-black","text-white");
    };

    tabs.appendChild(btn);
  });
}

/* ------------------ Grid ------------------ */

function renderGrid(category) {
  const grid = document.getElementById("grid");
  const search = document.getElementById("searchInput").value.toLowerCase();
  grid.innerHTML = "";

  ICON_DATA[category]
    .filter(icon => icon.name.includes(search))
    .forEach(icon => {

      const div = document.createElement("div");
      div.className =
        "border rounded p-3 flex items-center justify-center cursor-pointer hover:bg-gray-100";

      const paths = icon.paths.map(d => `<path d="${d}" />`).join("");

      div.innerHTML =
        `<svg width="20" height="20" fill="currentColor" viewBox="${icon.viewBox}">
          ${paths}
        </svg>`;

      div.onclick = () => selectIcon(icon);

      grid.appendChild(div);
    });
}

document.getElementById("searchInput")
  .addEventListener("input", () => renderGrid(CURRENT_CATEGORY));


/* ------------------ Select Icon ------------------ */

function selectIcon(icon) {
  CURRENT_ICON = icon;

  document.getElementById("emptyState").classList.add("hidden");
  document.getElementById("detailPanel").classList.remove("hidden");

  updatePreview();
}


/* ------------------ Preview ------------------ */

function updatePreview() {
  if (!CURRENT_ICON) return;

  const color = document.getElementById("colorPicker").value;
  const size = document.getElementById("sizePicker").value;

  const paths = CURRENT_ICON.paths
    .map(d => `<path d="${d}" />`)
    .join("");

  const svg =
    `<svg width="${size}" height="${size}" fill="${color}" viewBox="${CURRENT_ICON.viewBox}" xmlns="http://www.w3.org/2000/svg">
      ${paths}
    </svg>`;

  document.getElementById("svgPreview").innerHTML = svg;
  document.getElementById("svgCode").value = svg;
}

document.getElementById("colorPicker").addEventListener("input", updatePreview);
document.getElementById("sizePicker").addEventListener("input", updatePreview);


/* ------------------ Copy ------------------ */

document.getElementById("copyBtn").onclick = () => {
  const code = document.getElementById("svgCode").value;
  navigator.clipboard.writeText(code);

  const msg = document.getElementById("copyMsg");
  msg.classList.remove("hidden");
  setTimeout(() => msg.classList.add("hidden"), 1500);
};
</script>

</body>
</html>